# ДЗ1. Плохие практики в Dockerfile и их исправление
### 1. Многократные команды RUN:
Плохо: Использование нескольких команд RUN для обновления пакетов и установки программ.
```dockerfile
Copy code
RUN apt-get update
RUN apt-get install -y python3-pip
```
Почему плохо: Каждая команда RUN создает новый слой в Docker image, что увеличивает размер образа.

Исправлено: Объединение команд в одну строку с использованием &&.
```dockerfile
Copy code
RUN apt-get update && apt-get install -y python3-pip && rm -rf /var/lib/apt/lists/*
```

### 2. Копирование всего рабочего каталога и установка зависимостей:

Плохо: Копирование всего рабочего каталога перед установкой зависимостей.
```dockerfile
Copy code
COPY . /app
RUN pip install -r /app/requirements.txt
```
Почему плохо: Любое изменение в файлах приложения требует повторной установки всех зависимостей.

Исправлено: Сначала копируем только файл с зависимостями, устанавливаем их, а затем копируем все остальные файлы.

```dockerfile
Copy code
COPY requirements.txt /tmp/
RUN pip install --no-cache-dir -r /tmp/requirements.txt && rm /tmp/requirements.txt
WORKDIR /app
COPY . /app
```

### 3. Запуск от имени root и права на файлы:
Плохо: Использование chmod 777 и запуск приложения от имени root.
```dockerfile
Copy code
RUN chmod -R 777 /app
CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--port=8888", "--no-browser", "--allow-root"]
```
Почему плохо: Это создает проблемы с безопасностью.

Исправлено: Создание и использование непривилегированного пользователя.

```dockerfile
Copy code
RUN useradd -ms /bin/bash jupyter
USER jupyter
CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--port=8888", "--no-browser"]
```

## Плохие практики по использованию контейнеров
- Запуск тяжелых операций в контейнерах: Не рекомендуется запускать ресурсоемкие операции (такие как обработка больших данных или интенсивные вычисления) в контейнерах, так как это может привести к снижению производительности и нестабильности системы.

- Долговременные процессы: Контейнеры не предназначены для долговременного хранения данных или выполнения процессов на протяжении длительного времени. Для таких задач лучше использовать виртуальные машины или физические серверы.

## Когда не стоит использовать контейнеры
- Для приложений, требующих высокой производительности ввода-вывода: Если приложение сильно зависит от производительности дисковой системы или сети, контейнеры могут не обеспечить необходимый уровень производительности по сравнению с физическими серверами или виртуальными машинами.

- Для приложений с низким уровнем изоляции: Если приложение требует высокой степени изоляции и безопасности, использование контейнеров может быть недостаточным. В таких случаях лучше рассматривать виртуальные машины или физические серверы, которые обеспечивают лучшую изоляцию и безопасность.